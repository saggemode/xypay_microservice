<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security" th:fragment="layout (pageTitle, contentTemplate)">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="(${pageTitle} ?: 'Admin') + ' - XyPay Banking System'">XyPay Banking System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'banking-blue': '#1e40af',
                        'banking-gray': '#64748b',
                        'banking-accent': '#3b82f6'
                    }
                }
            }
        }
    </script>
    <style>
        .sidebar-fixed { width: 240px; }
        .sidebar-collapsed { width: 64px; }
        .main-offset { margin-left: 240px; }
        .main-offset-collapsed { margin-left: 64px; }
    </style>
</head>
<body class="bg-gray-50 h-screen overflow-hidden" x-data="{ sidebarOpen: true, sidebarCollapsed: false }">
    <nav class="bg-white shadow-sm border-b border-gray-200 fixed top-0 left-0 right-0 z-50">
        <div class="px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <div class="flex items-center ml-0">
                        <div class="flex-shrink-0">
                            <i class="fas fa-university text-2xl text-blue-600"></i>
                        </div>
                        <div class="ml-3">
                            <h1 class="text-xl font-bold text-gray-900">XyPay</h1>
                        </div>
                    </div>
                    <div class="hidden md:flex items-center space-x-6 ml-6">
                        <button @click="sidebarOpen = !sidebarOpen" class="p-2 rounded-md text-gray-500 hover:text-gray-700 hover:bg-gray-100">
                            <i class="fas fa-bars"></i>
                        </button>
                        <a href="/superuser/dashboard/legacy" class="text-gray-700 hover:text-blue-600 font-medium">Home</a>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <span class="hidden sm:inline text-sm text-gray-600" title="Current role">
                        <span sec:authorize="hasRole('SUPERUSER')">Role: Superuser</span>
                        <span sec:authorize="!hasRole('SUPERUSER') and hasRole('ADMIN')">Role: Admin</span>
                        <span sec:authorize="!hasRole('SUPERUSER') and !hasRole('ADMIN')">
                            Role: <span th:text="${#strings.substringAfter(#authentication.authorities[0].authority, 'ROLE_')}"></span>
                        </span>
                    </span>
                    <button class="p-2 rounded-md text-gray-400 hover:text-gray-600 hover:bg-gray-100"><i class="fas fa-moon text-lg"></i></button>
                    <button class="relative p-2 rounded-md text-gray-400 hover:text-gray-600 hover:bg-gray-100">
                        <i class="fas fa-bell text-lg"></i>
                        <span class="absolute top-0 right-0 block h-2 w-2 rounded-full bg-red-400"></span>
                    </button>
                    <div class="relative">
                        <button class="flex items-center p-2 rounded-md text-gray-400 hover:text-gray-600 hover:bg-gray-100">
                            <div class="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center">
                                <i class="fas fa-user text-white text-sm"></i>
                            </div>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <div class="flex h-full pt-16 overflow-hidden">
        <aside :class="[sidebarCollapsed ? 'sidebar-collapsed' : 'sidebar-fixed', 'bg-white border-r border-gray-200 flex flex-col fixed inset-y-0 z-30 transform transition-all duration-300', sidebarOpen ? 'translate-x-0' : '-translate-x-full md:translate-x-0']" style="overflow-y:auto; -webkit-overflow-scrolling: touch;">
            <div class="flex items-center h-16 px-6 border-b border-gray-200 justify-between">
                <span class="text-xl font-bold text-banking-blue">Fintech Bank</span>
                <button @click="sidebarCollapsed = !sidebarCollapsed" class="hidden md:inline-flex p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded">
                    <i :class="sidebarCollapsed ? 'fas fa-chevron-right' : 'fas fa-chevron-left'"></i>
                </button>
            </div>
            <nav class="flex-1 px-4 py-6 space-y-8">
                <!-- Dashboard -->
                <div>
                    <h4 class="text-xs font-semibold text-gray-400 uppercase mb-2">Dashboard</h4>
                    <ul class="space-y-1">
                        <li><a href="/superuser/dashboard/legacy" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-home mr-2"></i> Home</a></li>
                        <li><a href="/superuser/dashboard/legacy" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-tachometer-alt mr-2"></i> Dashboard</a></li>
                    </ul>
                </div>

                <!-- Authentication and Authorization -->
                <div>
                    <h4 class="text-xs font-semibold text-gray-400 uppercase mb-2">Authentication and Authorization</h4>
                    <ul class="space-y-1">
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-users mr-2"></i> Groups</a></li>
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-user mr-2"></i> Users</a></li>
                    </ul>
                </div>

                <!-- Accounts -->
                <div>
                    <h4 class="text-xs font-semibold text-gray-400 uppercase mb-2">Accounts</h4>
                    <ul class="space-y-1">
                        <li><a href="/admin/user-profiles" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-user-circle mr-2"></i> User profiles</a></li>
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-clipboard-list mr-2"></i> Audit logs</a></li>
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-bell mr-2"></i> Security alerts</a></li>
                        <li><a href="/admin/kyc-profiles" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-id-card mr-2"></i> KYC Profiles</a></li>
                        <li><a href="/admin/user-sessions" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-clock mr-2"></i> User sessions</a></li>
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-tachometer-alt mr-2"></i> Security Dashboard</a></li>
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-chart-line mr-2"></i> User Analytics</a></li>
                    </ul>
                </div>

                <!-- Address -->
                <div>
                    <h4 class="text-xs font-semibold text-gray-400 uppercase mb-2">Address</h4>
                    <ul class="space-y-1">
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-envelope mr-2"></i> Email addresses</a></li>
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-map-marker-alt mr-2"></i> Shipping Addresses</a></li>
                    </ul>
                </div>

                <!-- Bank -->
                <div>
                    <h4 class="text-xs font-semibold text-gray-400 uppercase mb-2">Bank</h4>
                    <ul class="space-y-1">
                        <li><a href="/admin/bank-transfers" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-university mr-2"></i> Bank Transfers</a></li>
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-file-invoice-dollar mr-2"></i> Bill Payments</a></li>
                        <li><a href="/admin/cbn-levies" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-balance-scale mr-2"></i> CBN Levies</a></li>
                        <li><a href="/admin/charge-control" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-calculator mr-2"></i> Charge Control</a></li>
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-users-cog mr-2"></i> Customer escalations</a></li>
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-piggy-bank mr-2"></i> Fixed Savings Accounts</a></li>
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-cogs mr-2"></i> Fixed Savings Settings</a></li>
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-exchange-alt mr-2"></i> Fixed Savings Transactions</a></li>
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-shield-alt mr-2"></i> Large Transaction Shield Settings</a></li>
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-map-pin mr-2"></i> Location Guard Settings</a></li>
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-hand-holding-usd mr-2"></i> Merchant settlement accounts</a></li>
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-moon mr-2"></i> Night Guard Settings</a></li>
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-piggy-bank mr-2"></i> Spend and Save Accounts</a></li>
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-cogs mr-2"></i> Spend and Save Settings</a></li>
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-exchange-alt mr-2"></i> Spend and Save Transactions</a></li>
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-user-tie mr-2"></i> Staff Activities</a></li>
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-user-circle mr-2"></i> Staff profiles</a></li>
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-user-shield mr-2"></i> Staff roles</a></li>
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-piggy-bank mr-2"></i> Target Saving Deposits</a></li>
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-money-bill-wave mr-2"></i> Target Saving Withdrawals</a></li>
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-bullseye mr-2"></i> Target Savings</a></li>
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-credit-card mr-2"></i> Transaction Charges</a></li>
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-check-circle mr-2"></i> Transaction approvals</a></li>
                        <li><a href="/admin/transactions" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-exchange-alt mr-2"></i> Transactions</a></li>
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-sliders-h mr-2"></i> Transfer Charge Controls</a></li>
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-exclamation-triangle mr-2"></i> Transfer Failures</a></li>
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-building mr-2"></i> VAT Charges</a></li>
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-circle mr-2"></i> VAT Charges</a></li>
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-credit-card mr-2"></i> Virtual Cards</a></li>
                        <li><a href="/admin/wallets" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-wallet mr-2"></i> Wallets</a></li>
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-circle mr-2"></i> XySave Accounts</a></li>
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-bullseye mr-2"></i> XySave Goals</a></li>
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-chart-line mr-2"></i> XySave Investments</a></li>
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-cogs mr-2"></i> XySave Settings</a></li>
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-exchange-alt mr-2"></i> XySave Transactions</a></li>
                    </ul>
                </div>

                <!-- Order -->
                <div>
                    <h4 class="text-xs font-semibold text-gray-400 uppercase mb-2">Order</h4>
                    <ul class="space-y-1">
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-box mr-2"></i> Order Items</a></li>
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-shopping-cart mr-2"></i> Orders</a></li>
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-credit-card mr-2"></i> Payments</a></li>
                    </ul>
                </div>

                <!-- Product -->
                <div>
                    <h4 class="text-xs font-semibold text-gray-400 uppercase mb-2">Product</h4>
                    <ul class="space-y-1">
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-tags mr-2"></i> Categories</a></li>
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-ticket-alt mr-2"></i> Coupon usages</a></li>
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-percent mr-2"></i> Coupons</a></li>
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-layer-group mr-2"></i> Product variants</a></li>
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-cube mr-2"></i> Products</a></li>
                    </ul>
                </div>

                <!-- Report -->
                <div>
                    <h4 class="text-xs font-semibold text-gray-400 uppercase mb-2">Report</h4>
                    <ul class="space-y-1">
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-chart-line mr-2"></i> Reports</a></li>
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-chart-bar mr-2"></i> Sales reports</a></li>
                    </ul>
                </div>

                <!-- Sites -->
                <div>
                    <h4 class="text-xs font-semibold text-gray-400 uppercase mb-2">Sites</h4>
                    <ul class="space-y-1">
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-globe mr-2"></i> Sites</a></li>
                    </ul>
                </div>

                <!-- Social Accounts -->
                <div>
                    <h4 class="text-xs font-semibold text-gray-400 uppercase mb-2">Social Accounts</h4>
                    <ul class="space-y-1">
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-share-alt mr-2"></i> Social accounts</a></li>
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-key mr-2"></i> Social application tokens</a></li>
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-mobile-alt mr-2"></i> Social applications</a></li>
                    </ul>
                </div>

                <!-- Admin_Honeypot -->
                <div>
                    <h4 class="text-xs font-semibold text-gray-400 uppercase mb-2">Admin_Honeypot</h4>
                    <ul class="space-y-1">
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-sign-in-alt mr-2"></i> Login attempts</a></li>
                    </ul>
                </div>

                <!-- Auth Token -->
                <div>
                    <h4 class="text-xs font-semibold text-gray-400 uppercase mb-2">Auth Token</h4>
                    <ul class="space-y-1">
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-key mr-2"></i> Tokens</a></li>
                    </ul>
                </div>

                <!-- Cart -->
                <div>
                    <h4 class="text-xs font-semibold text-gray-400 uppercase mb-2">Cart</h4>
                    <ul class="space-y-1">
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-shopping-cart mr-2"></i> Carts</a></li>
                    </ul>
                </div>

                <!-- Cities_Light -->
                <div>
                    <h4 class="text-xs font-semibold text-gray-400 uppercase mb-2">Cities_Light</h4>
                    <ul class="space-y-1">
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-city mr-2"></i> Cities</a></li>
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-flag mr-2"></i> Countries</a></li>
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-map mr-2"></i> Regions/states</a></li>
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-map-signs mr-2"></i> SubRegions</a></li>
                    </ul>
                </div>

                <!-- Django APScheduler -->
                <div>
                    <h4 class="text-xs font-semibold text-gray-400 uppercase mb-2">Django APScheduler</h4>
                    <ul class="space-y-1">
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-history mr-2"></i> Django job executions</a></li>
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-tasks mr-2"></i> Django jobs</a></li>
                    </ul>
                </div>

                <!-- Notification -->
                <div>
                    <h4 class="text-xs font-semibold text-gray-400 uppercase mb-2">Notification</h4>
                    <ul class="space-y-1">
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-bell mr-2"></i> Notifications</a></li>
                    </ul>
                </div>

                <!-- Store -->
                <div>
                    <h4 class="text-xs font-semibold text-gray-400 uppercase mb-2">Store</h4>
                    <ul class="space-y-1">
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-user-chart mr-2"></i> Customer Lifetime Values</a></li>
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-chart-area mr-2"></i> Store Analytics</a></li>
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-users mr-2"></i> Store Staff</a></li>
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-store mr-2"></i> Stores</a></li>
                    </ul>
                </div>

                <!-- Wishlist -->
                <div>
                    <h4 class="text-xs font-semibold text-gray-400 uppercase mb-2">Wishlist</h4>
                    <ul class="space-y-1">
                        <li><a href="#" class="flex items-center px-2 py-1 rounded hover:bg-gray-100"><i class="fas fa-heart mr-2"></i> Wishlists</a></li>
                    </ul>
                </div>
            </nav>
        </aside>

        <main :class="sidebarCollapsed ? 'main-offset-collapsed' : 'main-offset'" class="flex-1 h-full overflow-y-auto">
            <div class="px-4 sm:px-6 lg:px-8 py-8">
                <div th:replace="${contentTemplate}"></div>
            </div>
        </main>
    </div>
</body>
</html>


